<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:head>
        <title>VisionRIS Web CMS</title>
        <h:outputStylesheet name ="css/wr_datatable.css"/>
    </h:head>
    <h:body>
        <h:form prependId="false">

            <p:toolbar>
                <p:toolbarGroup align="left">
                    <p:commandButton type="button" value="New" onclick="addInstall.show();" icon="ui-icon-document" />

                    <p:commandButton type="button" value="Open" icon="ui-icon-folder-open" />

                    <span class="ui-separator">
                        <span class="ui-icon ui-icon-grip-dotted-vertical" />
                    </span>

                    <p:commandButton type="button" title="Save" icon="ui-icon-disk" />
                    <p:commandButton type="button" title="Delete" icon="ui-icon-trash" />
                    <p:commandButton type="button" title="Print" icon="ui-icon-print" />
                </p:toolbarGroup>

                <p:toolbarGroup align="right">
                    <p:menuButton value="Options">
                        <!--
                        <p:menuitem value="Save" actionListener="#{toolbarView.save}" update="messages" icon="ui-icon-disk" />
                        <p:menuitem value="Update" actionListener="#{toolbarView.update}" update="messages" icon="ui-icon-arrowrefresh-1-w" />
                        <p:menuitem value="Delete" actionListener="#{toolbarView.delete}" ajax="false" icon="ui-icon-close" />
                        <p:menuitem value="Homepage" url="http://www.primefaces.org" icon="ui-icon-extlink" />
                        -->
                    </p:menuButton>
                </p:toolbarGroup>

            </p:toolbar>

            <p:dataTable id="tabInstall"
                         value="#{installs.listInstalls}"
                         draggableColumns="true"
                         resizableColumns="true"
                         var="listInstalls"
                         liveResize="true"
                         styleClass="wr_datatable"
                         emptyMessage="No results were found with given criteria"
                         widgetVar="installsTable"
                         filteredValue="#{installs.filteredInstalls}">

                <p:column headerText="ID"
                          width="10"
                          resizable="false">
                    <h:outputText value="#{listInstalls.installId}" styleClass="fonty"/>
                </p:column>
                <p:column headerText="Client name"
                          width="80"
                          resizable="true">
                    <h:outputText value="#{listInstalls.clientName}" styleClass="fonty"/>
                </p:column>
                <p:column headerText="Install Date"
                          width="80">
                    <h:outputText value="#{listInstalls.installDate}" styleClass="fonty">
                        <f:convertDateTime pattern="dd/MMyyyy HH:mm"/>
                    </h:outputText>
                </p:column>
                <p:column headerText="Status" styleClass="#{listInstalls.operStatus.replaceAll(' ', '_')} wrap">                 
                    <h:outputText value="#{listInstalls.operStatus}" styleClass="fonty"/>
                </p:column>
                <p:column headerText="install Url"
                          styleClass="wrap"
                          width="80"> 
                    <h:outputText value="#{listInstalls.installUrl}" styleClass="fonty wrap"/>
                    <h:outputLink value="#{listInstalls.installUrl}" target="_blank"
                                  styleClass="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only">
                        <span class="ui-button-text" style="font-size: 11px;">Visit</span>
                    </h:outputLink>


                </p:column>
                <p:column headerText="Server"
                          width="80">                 
                    <h:outputText value="Debit : " style="font-weight: bold; font-size: 12px;"/> <h:outputText value="#{listInstalls.serverBandwidth} MB/s" styleClass="fonty"/><br></br>
                    <h:outputText value="RAM : " style="font-weight: bold;font-size: 12px;"/> <h:outputText value="#{listInstalls.serverRam} MB" styleClass="fonty"/><br></br>
                    <h:outputText value="HDD : " style="font-weight: bold;font-size: 12px;"/> <h:outputText value="#{listInstalls.serverHd} GB" styleClass="fonty"/><br></br>
                </p:column>
                <p:column headerText="Active problems" styleClass="fonty wrap">                 
                    <h:outputText value="#{listInstalls.activeProblems}" style="font-size: 12px; text-align: left;vertical-align: text-top;" />
                </p:column>
                <p:column headerText="Reco. solutions" styleClass="fonty wrap">                 
                    <h:outputText value="#{listInstalls.recomSolutions}" style="font-size: 12px; text-align: left; vertical-align: text-top;" />
                </p:column>
                <p:column headerText="Version" width="80">                 
                    <h:outputText value="First Version :" style="font-weight: bold; font-size: 12px;"/><br></br><h:outputText value="#{listInstalls.installFirstVersion}" style="text-align: center!important;font-size: 14px;font-weight: bold;"/><br></br>
                    <h:outputText value="Active Version :" style=" font-weight: bold; font-size: 12px;"/><br></br><h:outputText value="#{listInstalls.installActiveVersion}" style="text-align: center!important;font-size: 14px;color: green; font-weight: bold;"/>
                </p:column>          

                <p:column headerText="Location" styleClass="fonty wrap">                 
                    <h:outputText value="#{listInstalls.installCity}, #{listInstalls.installCountry}" styleClass="fonty"/>
                </p:column>

                <p:column headerText="M.Radiolog" styleClass="fonty wrap">                 
                    <h:outputText value="#{listInstalls.mainRadiologFullname}" styleClass="fonty"/><br></br>
                    <h:outputText value="#{listInstalls.mainRadiologContact}" styleClass="fonty"/>
                </p:column>

                <p:column headerText="Bin Tech." styleClass="fonty wrap">                 
                    <h:outputText value="#{listInstalls.binTechFullname}" styleClass="fonty"/>
                </p:column>
                <p:column headerText="Local Tech." styleClass="fonty wrap">                 
                    <h:outputText value="#{listInstalls.localTechFullname}" styleClass="fonty"/><br></br>
                    <h:outputText value="#{listInstalls.localTechContact}" styleClass="fonty"/>
                </p:column>
                <p:column headerText="Wanted Funcs" styleClass="fonty wrap">                 
                    <h:outputText value="#{listInstalls.installWantedFuncs}" styleClass="fonty"/><br></br>
                    <h:outputText value="#{listInstalls.installWantedFuncs}" styleClass="fonty"/>
                </p:column>
                <p:column headerText="Com. Taken">                 
                    <h:outputText value="#{listInstalls.comTaken?'YES':'NO'}" styleClass="fonty"/>

                </p:column>

            </p:dataTable>
            <p:remoteCommand name="refresh" actionListener="#{installs.refreshDatatable}" async="true" update="tabInstall"/>
        </h:form>
        <ui:include src="/AddInstall.xhtml"/>
    </h:body>
</html>

